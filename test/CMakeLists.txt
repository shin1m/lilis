function(do_test name)
	add_test(NAME ${name} COMMAND lilis --debug --verbose "${CMAKE_CURRENT_SOURCE_DIR}/${name}.lisp")
endfunction()
do_test(hello)
do_test(condition)
do_test(set)
do_test(begin)
do_test(rest)
do_test(import)
do_test(quasiquote)
do_test(macro)
do_test(macro-rest)
do_test(macro-test)
do_test(gensym)
do_test(eval)
do_test(boolean-test)
do_test(peano-test)
do_test(fibonacci)
do_test(hanoi)
do_test(prompt)
do_test(shiftreset-test)
do_test(shiftreset-yield)
do_test(shiftreset-tail)
do_test(callcc-test)
do_test(callcc-generate)
function(do_test_output name)
	add_test(${name} "${CMAKE_CURRENT_SOURCE_DIR}/run-lispo" "${PROJECT_BINARY_DIR}/src/lilis" "${CMAKE_CURRENT_SOURCE_DIR}/${name}.lisp")
endfunction()
do_test_output(catch)
do_test_output(compile-error-cast)
do_test_output(compile-error-nil)
do_test_output(compile-error-symbol)
do_test_output(compile-error-macro)
do_test_output(compile-error-export)
do_test_output(compile-error-import)
do_test_output(runtime-error)
function(do_test_repl name)
	add_test(${name} "${CMAKE_CURRENT_SOURCE_DIR}/run-repl" "${PROJECT_BINARY_DIR}/src/lilis" "${CMAKE_CURRENT_SOURCE_DIR}/repl.lisp" "${CMAKE_CURRENT_SOURCE_DIR}/${name}.lisp")
endfunction()
do_test_repl(repl-test)
